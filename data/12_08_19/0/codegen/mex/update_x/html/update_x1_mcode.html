<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [] = update_x(<span class="var type1" id="S2T1U5">arg1</span>,<span class="var type1" id="S3T2U6">arg2</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T3:U3"><span class="var type1" id="S4T3U9">str_A</span> = <span class="mxinfo " id="T3:U5"><span class="string">'A.csv'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T3:U6"><span class="var type1" id="S5T3U13">str_x</span> = <span class="mxinfo " id="T3:U8"><span class="string">'x.csv'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T3:U9"><span class="var type1" id="S6T3U17">str_y</span> = <span class="mxinfo " id="T3:U11"><span class="string">'y.csv'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T4:U12"><span class="var type1" id="S7T4U21">str_mu</span> = <span class="mxinfo " id="T4:U14"><span class="string">'mu.csv'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T4:U15"><span class="var type1" id="S8T4U25">A_path</span> = <span class="mxinfo " id="T4:U17">[<span class="var type1" id="S2T1U28">arg1</span> <span class="var type1" id="S4T3U29">str_A</span>]</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T4:U20"><span class="var type1" id="S9T4U32">x_old_path</span> = <span class="mxinfo " id="T4:U22">[<span class="var type1" id="S2T1U35">arg1</span> <span class="var type1" id="S5T3U36">str_x</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T4:U25"><span class="var type1" id="S10T4U39">y_path</span> = <span class="mxinfo " id="T4:U27">[<span class="var type1" id="S2T1U42">arg1</span> <span class="var type1" id="S6T3U43">str_y</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T5:U30"><span class="var type1" id="S11T5U46">mu_path</span> = <span class="mxinfo " id="T5:U32">[<span class="var type1" id="S2T1U49">arg1</span> <span class="var type1" id="S7T4U50">str_mu</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T2:U35"><span class="var type1" id="S12T2U53">fid_A</span> = <span class="mxinfo " id="T2:U37">fopen(<span class="var type1" id="S8T4U56">A_path</span>,<span class="string">'r'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo " id="T6:U39"><span class="var type1" id="S14T6U60">char_A</span> = <span class="mxinfo " id="T6:U41"><span class="mxinfo " id="T7:U42">fread(<span class="var type1" id="S12T2U64">fid_A</span>, <span class="string">'char'</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="var type0" id="S16T0U68">A</span> = <span class="mxinfo " id="T8:U44">str2double(<span class="mxinfo " id="T9:U45">char(<span class="var type1" id="S14T6U73">char_A</span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">fclose(<span class="var type1" id="S12T2U77">fid_A</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T2:U48"><span class="var type1" id="S20T2U80">fid_x</span> = <span class="mxinfo " id="T2:U50">fopen(<span class="var type1" id="S9T4U83">x_old_path</span>,<span class="string">'r'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T6:U52"><span class="var type1" id="S21T6U87">char_x</span> = <span class="mxinfo " id="T6:U54"><span class="mxinfo " id="T7:U55">fread(<span class="var type1" id="S20T2U91">fid_x</span>, <span class="string">'char'</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="var type0" id="S22T0U95">x_old</span> = <span class="mxinfo " id="T8:U57">str2double(<span class="mxinfo " id="T9:U58">char(<span class="var type1" id="S21T6U100">char_x</span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">fclose(<span class="var type1" id="S20T2U104">fid_x</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T2:U61"><span class="var type1" id="S23T2U107">fid_y</span> = <span class="mxinfo " id="T2:U63">fopen(<span class="var type1" id="S10T4U110">y_path</span>,<span class="string">'r'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T6:U65"><span class="var type1" id="S24T6U114">char_y</span> = <span class="mxinfo " id="T6:U67"><span class="mxinfo " id="T7:U68">fread(<span class="var type1" id="S23T2U118">fid_y</span>, <span class="string">'char'</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="mxinfo " id="T8:U70"><span class="var type1" id="S25T8U122">y</span> = <span class="mxinfo " id="T8:U72">str2double(<span class="mxinfo " id="T9:U73">char(<span class="var type1" id="S24T6U127">char_y</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">fclose(<span class="var type1" id="S23T2U131">fid_y</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo " id="T2:U76"><span class="var type1" id="S26T2U134">fid_mu</span> = <span class="mxinfo " id="T2:U78">fopen(<span class="var type1" id="S11T5U137">mu_path</span>,<span class="string">'r'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"><span class="mxinfo " id="T6:U80"><span class="var type1" id="S27T6U141">char_mu</span> = <span class="mxinfo " id="T6:U82"><span class="mxinfo " id="T7:U83">fread(<span class="var type1" id="S26T2U145">fid_mu</span>, <span class="string">'char'</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="var type0" id="S28T0U149">mu</span> = <span class="mxinfo " id="T8:U85">str2double(<span class="mxinfo " id="T9:U86">char(<span class="var type1" id="S27T6U154">char_mu</span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line">fclose(<span class="var type1" id="S26T2U158">fid_mu</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="comment">%%% Init variables OPF</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo " id="T2:U89"><span class="var type1" id="S29T2U161">n</span> = <span class="mxinfo " id="T2:U91">size(<span class="var type1" id="S25T8U164">y</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line"><span class="var type0" id="S31T0U168">c</span> = <span class="mxinfo " id="T2:U93">zeros(<span class="var type1" id="S29T2U171">n</span>,1)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line"><span class="var type0" id="S31T0U176">c</span>(3)=<span class="mxinfo " id="T2:U95">2</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line"><span class="var type0" id="S33T0U181">rho</span>=<span class="var type1" id="S3T2U182">arg2</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line"><span class="var type0" id="S34T0U185">n_childs</span> = <span class="mxinfo " id="T2:U97">floor(<span class="mxinfo " id="T2:U98">(<span class="var type1" id="S29T2U191">n</span>-7)/3</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line"><span class="var type0" id="S36T0U196">B</span> = <span class="mxinfo " id="T10:U100">zeros(<span class="mxinfo " id="T2:U101">3</span>,<span class="var type1" id="S29T2U200">n</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line"><span class="var type0" id="S36T0U204">B</span>(1,5)=<span class="mxinfo " id="T2:U103">2</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line"><span class="var type0" id="S36T0U211">B</span>(2,6)=<span class="mxinfo " id="T2:U104">2</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line"><span class="var type0" id="S36T0U218">B</span>(3,2)=<span class="mxinfo " id="T2:U105">-<span class="mxinfo " id="T2:U106">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line"><span class="var type0" id="S36T0U226">B</span>(3,7)=<span class="mxinfo " id="T2:U107">1</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line"><span class="var type0" id="S37T0U232">D</span> = <span class="mxinfo " id="T2:U108">zeros(<span class="var type1" id="S29T2U235">n</span>,1)</span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line"><span class="var type0" id="S38T0U239">E</span> = <span class="mxinfo " id="T2:U110">zeros(<span class="var type1" id="S29T2U242">n</span>,1)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line"><span class="var type0" id="S37T0U247">D</span>(1,1) = <span class="mxinfo " id="T2:U112">1</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line"><span class="var type0" id="S38T0U254">E</span>(7,1) = <span class="mxinfo " id="T2:U113">1</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line"><span class="comment">% Problem OPF: </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="message error" id="M1F1C">cvx_begin</span> <span class="string">quiet</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line">    variable <span class="string">x(n,1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line">    minimize(square(<span class="var type0" id="S31T0U273">c</span>'*x) + <span class="var type0" id="S28T0U278">mu</span>'*x + .5*<span class="var type0" id="S33T0U284">rho</span>*sum_square(x-<span class="var type0" id="S25T0U290">y</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line">    x(1)==1.;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line">    x(2)==1.;</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line">    x(3)&lt;=10;</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line">    x(3)&gt;=0.;</span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line">    x(5)==0.;</span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line">    x(6)==0.;</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line">    x(7)==0.;</span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line">    norm(<span class="var type0" id="S36T0U338">B</span>*x,2) &lt;= x(1) + x(7);</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line">cvx_end</span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line">csvwrite(strcat(<span class="var type0" id="S2T0U357">arg1</span>,"x.csv"),x)</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line"><span class="var type0" id="S49T0U363">residuo</span> = norm(x-<span class="var type0" id="S25T0U369">y</span>,2);</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line">dlmwrite(<span class="string">'estado.dat'</span>,x',<span class="string">'-append'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line">dlmwrite(<span class="string">'residuo.dat'</span>,<span class="var type0" id="S49T0U383">residuo</span>,<span class="string">'-append'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line">dlmwrite(<span class="string">'costo.dat'</span>,<span class="var type0" id="S31T0U391">c</span>'*x,<span class="string">'-append'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
